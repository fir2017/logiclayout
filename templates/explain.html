{% extends 'master.html' %}
{% block body %}
<p>
	Here are explanations of the different digital logic gates. Gates are read as either high (on) or low (off) which can be represented with True (1) or False (0). 
</p>
<h1>Not Gate</h1>
<canvas width="200" height="100" id="not-example"></canvas>
<h1>And Gate</h1>
<canvas width="220" height="100" id="and-example"></canvas>
<h1>Nand Gate</h1>
<canvas width="220" height="100" id="nand-example"></canvas>
<h1>Or Gate</h1>
<canvas width="220" height="100" id="or-example"></canvas>
<h1>Nor Gate</h1>
<canvas width="220" height="100" id="nor-example"></canvas>
<h1>Xor Gate</h1>
<canvas width="220" height="100" id="xor-example"></canvas>
<h1>Nxor Gate</h1>
<canvas width="220" height="100" id="nxor-example"></canvas>

<!-- JavaScript using Jinja to determine if JSON results exist -->
<script type="text/javascript">
	// color setup for circuit
	var color = { 
		on: '#F2CB05',
		off: '#0d59c3',
		fill: '#FFFFFF',
		wire: '#0d59c3'
	};

	// attributes applied for the circuit components
	function attr(obj) {
		obj.fillColor = color.fill;
		obj.strokeColor = color.wire;
		obj.strokeWidth = 2;
		obj.state = null;
		obj.change = false;
		return obj
	}

	function lineAttr(obj) {
		obj.strokeColor = color.wire;
		obj.strokeWidth = 2;
		return obj
	}

	function textAttr(obj, name) {
		obj.fillColor = color.wire;
		obj.content = String(name);
		return obj
	}

	function textDir(dir, name) {
		return ((dir == 'in') ? 1 : -1.1)*18.0 + String(name).length*4.0;
	}

	function pin(x, y, dir, obj) {
		// offset 
		var o = 4;
		var _o = ((dir == 'in') ? o : -o)*2.0;

		// pin body
		var body = attr(obj);
		body.moveTo(x-_o, y+o);
		body.lineTo(x+(_o*1.5), y+o);
		body.lineTo(x+(_o*2.0), y);
		body.lineTo(x+(_o*1.5), y-o);
		body.lineTo(x-_o, y-o);
		body.closePath();

		// determines direction
		if (dir == 'in') body.change = true;	

		return body;	
	}

	function setState(state) {
		return state ? color.on : color.off;
	}

	var hitOptions = {
		segments: true,
		stroke: true,
		fill: true,
		tolerance: 10
	};

	var segment, path;



	// window.onload = function() {
	// 	var currentCanvas = document.getElementById("not-example");
	// 	paper.setup(currentCanvas);
	// 	notGate(100,50);
	// 	// paperPin = port(x,y,dir,name);
	// }
</script>
<script type="text/paperscript" canvas="not-example">
	var input, output, notGate;
	var notCanvas = "not-example"


	function port(x, y, dir, name) {	
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function notGate(x, y) {
		// offset value 
		var o = 10;

		// draw lines
		var inLine = lineAttr(new Path.Line(x, y, x-50, y));
		var outLine = lineAttr(new Path.Line(x, y, x+55, y));

		// circle on the right to indicate not function
		var notCircle = attr(new Path.Circle(x+(1.4*o), y, 0.4*o));

		// triangle body of gate
		var gate = attr(new Path());
		gate.moveTo(x-o, y-o);
		gate.lineTo(x-o, y+o);
		gate.lineTo(x+o, y);
		gate.closePath();

		// compounding two paths together to make not gate symbol
		notGate = attr(new CompoundPath(gate, notCircle));

		// input and output symbols
		input = port(x-50, y, 'in', 'x');
		output = port(x+55, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	notGate(100,50);

	/* --------------------------------------------------------------------- */

	function onMouseDown(event) {
		segment = path = null;
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = !path.state;
				path.fillColor = setState(path.state);
				notGate.fillColor = setState(!path.state);
				output.fillColor = setState(!path.state);
			}
		}
	}
</script>
<script type="text/paperscript" canvas="and-example">
	var xInput, yInput, gate, output;

	function port(x, y, dir, name) {
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function andGate(x, y) {
		// offset value 
		var o = 20;

		// draw lines
		var xLine = attr(new Path.Line(x, y-10, x-60, y-10));
		var yLine = attr(new Path.Line(x, y+10, x-60, y+10));
		var outLine = attr(new Path.Line(x, y, x+65, y));

		// triangle body of gate
		gate = attr(new Path());
		gate.moveTo(x-o, y-o);
		gate.lineTo(x-o, y+o);
		gate.lineTo(x, y+o);
		gate.arcTo(x+o, y, x, y-o);
		gate.closePath();

		// input and output symbols
		xInput = port(x-60, y-10, 'in', 'x');
		yInput = port(x-60, y+10, 'in', 'y');
		output = port(x+65, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	andGate(110,50);

	/* --------------------------------------------------------------------- */

	function onMouseDown(event) {
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = !path.state;

				// changes the state of the inputs, gate and output
				gate.state = xInput.state & yInput.state;

				xInput.fillColor = setState(xInput.state);
				yInput.fillColor = setState(yInput.state);
				gate.fillColor = setState(gate.state);
				output.fillColor = setState(gate.state);
			}
		}
	}
</script>
<!--////////////////////////////////////////////////////////////////////////-->
<script type="text/paperscript" canvas="nand-example">
	var xInput, yInput, gate, output;

	function port(x, y, dir, name) {
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function nandGate(x, y) {
		// offset value 
		var o = 20;

		// draw lines
		var xLine = attr(new Path.Line(x, y-10, x-60, y-10));
		var yLine = attr(new Path.Line(x, y+10, x-60, y+10));
		var outLine = attr(new Path.Line(x, y, x+65, y));

		// body of gate
		var body = attr(new Path());
		body.moveTo(x-o, y-o);
		body.lineTo(x-o, y+o);
		body.lineTo(x, y+o);
		body.arcTo(x+o, y, x, y-o);
		body.closePath();

		// circle on the right to indicate not part
		var circle = attr(new Path.Circle(new Point(x+(1.25*o), y), 0.25*o));

		// compounding two paths together to make not gate symbol
		gate = attr(new CompoundPath(body, circle));

		// input and output symbols
		xInput = port(x-60, y-10, 'in', 'x');
		yInput = port(x-60, y+10, 'in', 'y');
		output = port(x+65, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	nandGate(110,50);

	function onMouseDown(event) {
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = !path.state;

				// changes the state of the inputs, gate and output
				gate.state = !(xInput.state & yInput.state);

				xInput.fillColor = setState(xInput.state);
				yInput.fillColor = setState(yInput.state);
				gate.fillColor = setState(gate.state);
				output.fillColor = setState(gate.state);
			}
		}
	}
</script>
<!--////////////////////////////////////////////////////////////////////////-->
<script type="text/paperscript" canvas="or-example">
	var xInput, yInput, gate, output;

	function port(x, y, dir, name) {
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function orGate(x, y) {
		// offset value 
		var o = 20;

		// draw lines
		var xLine = attr(new Path.Line(x, y-10, x-60, y-10));
		var yLine = attr(new Path.Line(x, y+10, x-60, y+10));
		var outLine = attr(new Path.Line(x, y, x+65, y));

		// body of gate
		gate = attr(new Path());
		gate.moveTo(x-o, y-o);
		gate.curveTo(x-(o*0.5), y, x-o, y+o);
		gate.quadraticCurveTo(x+(o*0.5), y+o, x+o, y);
		gate.quadraticCurveTo(x+(o*0.5), y-o, x-o, y-o);
		gate.closePath();

		// input and output symbols
		xInput = port(x-60, y-10, 'in', 'x');
		yInput = port(x-60, y+10, 'in', 'y');
		output = port(x+65, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	orGate(110,50);

	function onMouseDown(event) {
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = !path.state;

				// changes the state of the inputs, gate and output
				gate.state = xInput.state | yInput.state;

				xInput.fillColor = setState(xInput.state);
				yInput.fillColor = setState(yInput.state);
				gate.fillColor = setState(gate.state);
				output.fillColor = setState(gate.state);
			}
		}
	}
</script>
<!--////////////////////////////////////////////////////////////////////////-->
<script type="text/paperscript" canvas="nor-example">
	var xInput, yInput, gate, output;

	function port(x, y, dir, name) {
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function norGate(x, y) {
		// offset value 
		var o = 20;

		// draw lines
		var xLine = attr(new Path.Line(x, y-10, x-60, y-10));
		var yLine = attr(new Path.Line(x, y+10, x-60, y+10));
		var outLine = attr(new Path.Line(x, y, x+65, y));

		// body of gate
		gate = attr(new Path());
		gate.moveTo(x-o, y-o);
		gate.curveTo(x-(o*0.5), y, x-o, y+o);
		gate.quadraticCurveTo(x+(o*0.5), y+o, x+o, y);
		gate.quadraticCurveTo(x+(o*0.5), y-o, x-o, y-o);
		gate.closePath();

		// circle on the right to indicate not part
		var circle = attr(new Path.Circle(x+(1.25*o), y, 0.25*o));

		// compounding two paths together to make not gate symbol
		gate = attr(new CompoundPath(gate, circle));

		// input and output symbols
		xInput = port(x-60, y-10, 'in', 'x');
		yInput = port(x-60, y+10, 'in', 'y');
		output = port(x+65, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	norGate(110,50);

	function onMouseDown(event) {
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = !path.state;

				// changes the state of the inputs, gate and output
				gate.state = !(xInput.state | yInput.state);

				xInput.fillColor = setState(xInput.state);
				yInput.fillColor = setState(yInput.state);
				gate.fillColor = setState(gate.state);
				output.fillColor = setState(gate.state);
			}
		}
	}
</script>
<!--////////////////////////////////////////////////////////////////////////-->
<script type="text/paperscript" canvas="xor-example">
	var xInput, yInput, gate, output;

	function port(x, y, dir, name) {
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function xorGate(x, y) {
		// offset value 
		var o = 20;

		// draw lines
		var xLine = attr(new Path.Line(x, y-10, x-60, y-10));
		var yLine = attr(new Path.Line(x, y+10, x-60, y+10));
		var outLine = attr(new Path.Line(x, y, x+65, y));

		// body of gate
		gate = attr(new Path());
		gate.moveTo(x-o, y-o);
		gate.curveTo(x-(o*0.5), y, x-o, y+o);
		gate.quadraticCurveTo(x+(o*0.5), y+o, x+o, y);
		gate.quadraticCurveTo(x+(o*0.5), y-o, x-o, y-o);
		gate.closePath();

		// xor line
		var l = lineAttr(new Path());
		l.moveTo(new Point(x-(o*1.4), y-o));
		l.curveTo(new Point(x-(o*0.9), y), new Point(x-(o*1.4), y+o));

		// input and output symbols
		xInput = port(x-60, y-10, 'in', 'x');
		yInput = port(x-60, y+10, 'in', 'y');
		output = port(x+65, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	xorGate(110,50);

	function onMouseDown(event) {
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = (path.state) ? false : true;

				// changes the state of the inputs, gate and output
				gate.state = xInput.state ^ yInput.state;
				xInput.fillColor = (xInput.state) ? color.on : color.off;
				yInput.fillColor = (yInput.state) ? color.on : color.off;
				gate.fillColor = (gate.state) ? color.on : color.off;
				output.fillColor = (gate.state) ? color.on : color.off;
			}
		}
	}
</script>
<!--////////////////////////////////////////////////////////////////////////-->
<script type="text/paperscript" canvas="nxor-example">
	var xInput, yInput, gate, output;

	function port(x, y, dir, name) {
		var text = textAttr(new PointText(x-textDir(dir,name), y+4.0), name);
		return pin(x, y, dir, new Path());
	}

	function nxorGate(x, y) {
		// offset value 
		var o = 20;

		// draw lines
		var xLine = attr(new Path.Line(x, y-10, x-60, y-10));
		var yLine = attr(new Path.Line(x, y+10, x-60, y+10));
		var outLine = attr(new Path.Line(x, y, x+65, y));

		// body of gate
		gate = attr(new Path());
		gate.moveTo(x-o, y-o);
		gate.curveTo(x-(o*0.5), y, x-o, y+o);
		gate.quadraticCurveTo(x+(o*0.5), y+o, x+o, y);
		gate.quadraticCurveTo(x+(o*0.5), y-o, x-o, y-o);
		gate.closePath();

		// xor line
		var l = lineAttr(new Path());
		l.moveTo(new Point(x-(o*1.4), y-o));
		l.curveTo(new Point(x-(o*0.9), y), new Point(x-(o*1.4), y+o));

		// circle on the right to indicate not part
		var circle = attr(new Path.Circle(x+(1.25*o), y, 0.25*o));

		// compounding two paths together to make not gate symbol
		gate = attr(new CompoundPath(gate, circle));

		// input and output symbols
		xInput = port(x-60, y-10, 'in', 'x');
		yInput = port(x-60, y+10, 'in', 'y');
		output = port(x+65, y, 'out', 'f');
	}

	/* --------------------------------------------------------------------- */

	nxorGate(110,50);

	function onMouseDown(event) {
		var hitResult = project.hitTest(event.point, hitOptions);

		if (!hitResult) return;

		if (hitResult) {
			path = hitResult.item;

			if (path.change == true) {
				path.state = (path.state) ? false : true;

				// changes the state of the inputs, gate and output
				gate.state = !(xInput.state ^ yInput.state);
				xInput.fillColor = (xInput.state) ? color.on : color.off;
				yInput.fillColor = (yInput.state) ? color.on : color.off;
				gate.fillColor = (gate.state) ? color.on : color.off;
				output.fillColor = (gate.state) ? color.on : color.off;
			}
		}
	}
</script>
 
{% endblock %}
